package TreeManipulation;

import java.io.BufferedReader;
import java.io.DataInputStream;
import java.io.FileInputStream;
import java.io.InputStreamReader;

public class RemoveEdgeDistance {

	public static void main(String[] args) {
		String test = "(((((F1859:0.00776516507471829848,F3202:0.01876587501790572335):0.00144325390327166236,(F1025:0.00303961721751024906,((F3132:0.00766991152348259729,F1638:0.01409272944629011426):0.00150010805391623259,((F2582:0.00000100000050002909,F3425:0.00304105919174450659):0.00000100000050002909,(F2065:0.00762364485863421815,(F1413:0.00304914296691468538,F2202:0.00459356826990081624):0.00151784389299680525):0.00000100000050002909):0.00151510414926993298):0.00152219770982452173):0.00154800621850411345):0.01932883260407225121,((((F744:0.00000100000050002909,(F2482:0.00000100000050002909,F2457:0.00000100000050002909):0.00000100000050002909):0.00000100000050002909,(F2483:0.00000100000050002909,F2485:0.00000100000050002909):0.00000100000050002909):0.00305607887622611363,(((F2489:0.00000100000050002909,F2484:0.00000100000050002909):0.00000100000050002909,((F2460:0.00000100000050002909,(F2479:0.00000100000050002909,(F2491:0.00000100000050002909,(F2465:0.00000100000050002909,(F2466:0.00000100000050002909,(F2472:0.00000100000050002909,(F2458:0.00000100000050002909,(F2459:0.00000100000050002909,F2481:0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909,(F2467:0.00000100000050002909,F2492:0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909,((((F412:0.00000100000050002909,(((((F781:0.00000100000050002909,(F3901:0.00000100000050002909,(F493:0.00000100000050002909,(F3907:0.00000100000050002909,(F295:0.00000100000050002909,(F186:0.00000100000050002909,(F3906:0.00000100000050002909,F180:0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909,F3903:0.00000100000050002909):0.00000100000050002909,(F194:0.00000100000050002909,F189:0.00000100000050002909):0.00000100000050002909):0.00000100000050002909,(((((F196:0.00000100000050002909,(F762:0.00000100000050002909,F199:0.00151991664992857304):0.00000100000050002909):0.00000100000050002909,(F188:0.00000100000050002909,F780:0.00000100000050002909):0.00000100000050002909):0.00000100000050002909,F184:0.00000100000050002909):0.00000100000050002909,F803:0.00000100000050002909):0.00000100000050002909,(F200:0.00000100000050002909,(((F179:0.00000100000050002909,((F3895:0.00000100000050002909,(F178:0.00000100000050002909,(F794:0.00000100000050002909,(F3905:0.00000100000050002909,(F802:0.00000100000050002909,(F804:0.00000100000050002909,(F335:0.00000100000050002909,(F2541:0.00000100000050002909,(F3908:0.00000100000050002909,(F2519:0.00000100000050002909,(F3897:0.00000100000050002909,(F297:0.00000100000050002909,(F208:0.00000100000050002909,(F754:0.00000100000050002909,(F191:0.00000100000050002909,(F2540:0.00000100000050002909,(F182:0.00000100000050002909,(F193:0.00000100000050002909,(F460:0.00000100000050002909,(F296:0.00000100000050002909,(F181:0.00000100000050002909,(F3900:0.00000100000050002909,((F782:0.00000100000050002909,(F3909:0.00000100000050002909,(F3187:0.00000100000050002909,(F185:0.00000100000050002909,(F3898:0.00000100000050002909,(F372:0.00000100000050002909,(F3902:0.00000100000050002909,(F3899:0.00000100000050002909,(F3904:0.00000100000050002909,(F3896:0.00000100000050002909,(F222:0.00000100000050002909,(F795:0.00000100000050002909,(F206:0.00000100000050002909,(F310:0.00000100000050002909,((F337:0.00000100000050002909,(F2521:0.00000100000050002909,(F2526:0.00000100000050002909,F3060:0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909,(F462:0.00000100000050002909,(F195:0.00000100000050002909,(F312:0.00000100000050002909,(F203:0.00000100000050002909,(F192:0.00000100000050002909,(F187:0.00000100000050002909,(F190:0.00000100000050002909,(F2547:0.00000100000050002909,(F756:0.00000100000050002909,F311:0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909,F3178:0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909,(F207:0.00000100000050002909,(F766:0.00000100000050002909,((F183:0.00000100000050002909,(F3364:0.00000100000050002909,(((((F2650:0.00000100000050002909,(F330:0.00000100000050002909,((F2554:0.00000100000050002909,((F3878:0.00000100000050002909,(F326:0.00000100000050002909,(((((F2652:0.00000100000050002909,((F2527:0.00000100000050002909,(F2645:0.00000100000050002909,(F2580:0.00000100000050002909,(F2517:0.00000100000050002909,((((F2654:0.00000100000050002909,(F3306:0.00000100000050002909,(F2649:0.00000100000050002909,F3343:0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909,((F3305:0.00000100000050002909,(F2525:0.00000100000050002909,F2528:0.00000100000050002909):0.00000100000050002909):0.00000100000050002909,F2529:0.00000100000050002909):0.00000100000050002909):0.00000100000050002909,F2905:0.00000100000050002909):0.00000100000050002909,F3672:0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00150866888441355857):0.00000100000050002909):0.00000100000050002909,F3670:0.00000100000050002909):0.00000100000050002909):0.00000100000050002909,F2530:0.00000100000050002909):0.00000100000050002909,((((F329:0.00000100000050002909,F333:0.00000100000050002909):0.00000100000050002909,F325:0.00000100000050002909):0.00000100000050002909,F3854:0.00000100000050002909):0.00000100000050002909,F334:0.00000100000050002909):0.00000100000050002909):0.00000100000050002909,F3853:0.00000100000050002909):0.00000100000050002909,F3345:0.00000100000050002909):0.00150936958530387740):0.00000100000050002909):0.00000100000050002909,F2520:0.00000100000050002909):0.00000100000050002909):0.00000100000050002909,F2653:0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909,F3189:0.00000100000050002909):0.00000100000050002909,F2644:0.00000100000050002909):0.00000100000050002909,((F3048:0.00000100000050002909,(F2906:0.00000100000050002909,(F3877:0.00000100000050002909,(F749:0.00000100000050002909,F322:0.00000100000050002909):0.00000100000050002909):0.00610561943510864059):0.00000100000050002909):0.00000100000050002909,(((((F768:0.00000100000050002909,F3173:0.00000100000050002909):0.00000100000050002909,F2646:0.00000100000050002909):0.00000100000050002909,(F2532:0.00000100000050002909,(F323:0.00000100000050002909,(F3188:0.00000100000050002909,((((F2655:0.00000100000050002909,(F3671:0.00000100000050002909,((F3174:0.00000100000050002909,(F3176:0.00000100000050002909,(F2647:0.00000100000050002909,(F3363:0.00000100000050002909,(F3344:0.00000100000050002909,(F3245:0.00000100000050002909,(F3175:0.00000100000050002909,(((((F2522:0.00000100000050002909,F2556:0.00000100000050002909):0.00000100000050002909,F2907:0.00000100000050002909):0.00000100000050002909,((F494:0.00000100000050002909,F3050:0.00000100000050002909):0.00000100000050002909,(F2581:0.00000100000050002909,(F3052:0.00000100000050002909,F3578:0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909,(F3172:0.00000100000050002909,(F3194:0.00000100000050002909,(((F3177:0.00000100000050002909,F3185:0.00000100000050002909):0.00000100000050002909,(F3244:0.00000100000050002909,F3183:0.00000100000050002909):0.00000100000050002909):0.00000100000050002909,((F2656:0.00000100000050002909,(F3191:0.00000100000050002909,(F3193:0.00000100000050002909,(F3192:0.00000100000050002909,((F3190:0.00000100000050002909,(F3246:0.00000100000050002909,F3181:0.00000100000050002909):0.00000100000050002909):0.00000100000050002909,F327:0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909,F3186:0.00000100000050002909):0.00000100000050002909):0.00303379010060930926):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909,(F2677:0.00000100000050002909,(F328:0.00000100000050002909,(F2676:0.00000100000050002909,((F3622:0.00000100000050002909,((((F3044:0.00000100000050002909,(F3047:0.00000100000050002909,(F3046:0.00000100000050002909,(F3045:0.00000100000050002909,F3049:0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909,F3042:0.00000100000050002909):0.00152365930706840902,((((((((F3880:0.00000100000050002909,((F2531:0.00000100000050002909,F2651:0.00000100000050002909):0.00000100000050002909,(F2675:0.00000100000050002909,F3180:0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909,F2546:0.00000100000050002909):0.00000100000050002909,F2648:0.00000100000050002909):0.00000100000050002909,F331:0.00000100000050002909):0.00000100000050002909,F3673:0.00000100000050002909):0.00000100000050002909,F3879:0.00000100000050002909):0.00000100000050002909,F332:0.00000100000050002909):0.00000100000050002909,F3184:0.00000100000050002909):0.00152072351940339473):0.00000100000050002909,F2523:0.00000100000050002909):0.00000100000050002909):0.00150680069432822033,F3051:0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00149932935099311064):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909,F3852:0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909,F3182:0.00000100000050002909):0.00000100000050002909,F3669:0.00000100000050002909):0.00000100000050002909,F2518:0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909,F3179:0.00000100000050002909):0.00000100000050002909,F197:0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909,F3876:0.00152117041384047021):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909,F202:0.00456119257841236352):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909,((F751:0.00000100000050002909,F752:0.00000100000050002909):0.00000100000050002909,(F3881:0.00000100000050002909,(((((((((((F2938:0.00000100000050002909,F2940:0.00000100000050002909):0.00000100000050002909,F2931:0.00000100000050002909):0.00000100000050002909,F2932:0.00000100000050002909):0.00000100000050002909,F3514:0.00000100000050002909):0.00000100000050002909,F2723:0.00000100000050002909):0.00000100000050002909,F3461:0.00000100000050002909):0.00000100000050002909,(F3510:0.00000100000050002909,F2730:0.00000100000050002909):0.00000100000050002909):0.00000100000050002909,F2719:0.00000100000050002909):0.00000100000050002909,F3460:0.00000100000050002909):0.00000100000050002909,((((((((((((((((((((((((((((((((((F3516:0.00000100000050002909,F3469:0.00000100000050002909):0.00000100000050002909,F2728:0.00000100000050002909):0.00000100000050002909,F2941:0.00000100000050002909):0.00000100000050002909,F2726:0.00000100000050002909):0.00000100000050002909,F3509:0.00000100000050002909):0.00000100000050002909,F3508:0.00000100000050002909):0.00000100000050002909,F2722:0.00000100000050002909):0.00000100000050002909,F2720:0.00000100000050002909):0.00000100000050002909,F2724:0.00000100000050002909):0.00000100000050002909,F3463:0.00000100000050002909):0.00000100000050002909,F3513:0.00000100000050002909):0.00000100000050002909,F3462:0.00000100000050002909):0.00000100000050002909,F2778:0.00000100000050002909):0.00000100000050002909,F2936:0.00000100000050002909):0.00000100000050002909,F2779:0.00000100000050002909):0.00000100000050002909,F2729:0.00000100000050002909):0.00000100000050002909,F3515:0.00000100000050002909):0.00000100000050002909,F3511:0.00000100000050002909):0.00000100000050002909,F2933:0.00000100000050002909):0.00000100000050002909,F2930:0.00000100000050002909):0.00000100000050002909,F3468:0.00000100000050002909):0.00000100000050002909,F3517:0.00000100000050002909):0.00000100000050002909,F2939:0.00000100000050002909):0.00000100000050002909,F3466:0.00000100000050002909):0.00000100000050002909,F2929:0.00000100000050002909):0.00000100000050002909,F2727:0.00000100000050002909):0.00000100000050002909,F3465:0.00000100000050002909):0.00000100000050002909,F2934:0.00000100000050002909):0.00000100000050002909,F2731:0.00000100000050002909):0.00000100000050002909,F2935:0.00000100000050002909):0.00000100000050002909,F2937:0.00000100000050002909):0.00000100000050002909,F3512:0.00000100000050002909):0.00000100000050002909,(F2725:0.00000100000050002909,(F3467:0.00000100000050002909,(F3464:0.00000100000050002909,F2777:0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909,F2721:0.00000100000050002909):0.00000100000050002909):0.00151524643841747619,F2464:0.00455987672372878006):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909,((F763:0.00000100000050002909,(F205:0.00000100000050002909,(F373:0.00000100000050002909,(F410:0.00000100000050002909,(F204:0.00000100000050002909,F371:0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909,F198:0.00305268447796577932):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909,F753:0.00000100000050002909):0.00000100000050002909):0.00000100000050002909,F461:0.00000100000050002909):0.00456907451206022171,F2461:0.00000100000050002909):0.00000100000050002909,F2463:0.00000100000050002909):0.00000100000050002909):0.00460833987494190921):0.00157714077016582422,((((F2495:0.00000100000050002909,(F2488:0.00000100000050002909,(F2477:0.00000100000050002909,(F2476:0.00000100000050002909,(((F2493:0.00000100000050002909,(F743:0.00000100000050002909,((F2478:0.00000100000050002909,F2480:0.00000100000050002909):0.00000100000050002909,(F2490:0.00000100000050002909,F750:0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909,F745:0.00000100000050002909):0.00000100000050002909,F2475:0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909):0.00000100000050002909,F742:0.00000100000050002909):0.00000100000050002909,F748:0.00000100000050002909):0.00000100000050002909,F2474:0.00000100000050002909):0.00147016020478837038):0.01221214662696184887):0.00877172209907181415,(F3911:0.00452560185544197569,(F3914:0.00606774140524971115,F3917:0.00758382469005597793):0.00000100000050002909):0.01374350597954054551):0.11926431056037396783,F571:0.11926431056037396783);";
		//String test = "(E:5.57866666668,(A:3.42283333332,B:3.36916666668)70.00:0.667142857143,(D:3.46083333332,C:3.4515)67.00:0.597014925373);";
		System.out.println(removeEdgeAnnotation(test));
		
	}
	
	public static String type() {
		return "Tree";
	}
	public static String description() {
		return "Clean the input file's tree";
	}
	public static String parameter_info() {
		return "[treeInputFile]";
	}
	public static void execute(String[] args) {
		
		try {
			String inputFile = args[0];
			FileInputStream fstream = new FileInputStream(inputFile);
			DataInputStream din = new DataInputStream(fstream);
			BufferedReader in = new BufferedReader(new InputStreamReader(din));
			in.readLine();
			while (in.ready()) {
				String str = in.readLine().trim();
				if (!str.equals("")) {
					System.out.println(removeEdgeAnnotation(str) + ";");
				}
				
			}
			
			
		} catch (Exception e) {
			e.printStackTrace();
		}
	}
	
	public static boolean isNumeric(String v) {
		if (v.equals("0")) {
			return true;
		} else if (v.equals("1")) {
			return true;
		} else if (v.equals("2")) {
			return true;
		} else if (v.equals("3")) {
			return true;
		} else if (v.equals("4")) {
			return true;
		} else if (v.equals("5")) {
			return true;
		} else if (v.equals("6")) {
			return true;
		} else if (v.equals("7")) {
			return true;
		} else if (v.equals("8")) {
			return true;
		} else if (v.equals("9")) {
			return true;
		}
		return false;
	}
	public static String removeEdgeAnnotation(String tree) {
		String newTree = "";
		boolean writeFlag = true;
		boolean isNumericCheckFlag = false;
		for (int i = 0;i < tree.length(); i++) {
			String v = tree.substring(i, i + 1);
			if (v.equals(":")) {
				writeFlag = false;
			}
			if (v.equals(",")) {
				writeFlag = true;
			}
			if (v.equals("(")) {
				writeFlag = true;
			}
			if (isNumericCheckFlag) {
				if (i + 1 < tree.length()) {
					String nextV = tree.substring(i + 1, i + 2);
					if (isNumeric(nextV)) {
						writeFlag = false;
					}
				}
			}
			if (v.equals(")")) {
				writeFlag = true;
				isNumericCheckFlag = true;
				
			} else {
				isNumericCheckFlag = false;
			}
			if (writeFlag) {
				newTree += v;
			}
		}
		return newTree;
	}
}
